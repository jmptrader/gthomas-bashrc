#!/bin/sh
direct=0
case $(uname -n) in
    nell|tgulacsi-desktop)
        if /sbin/ifconfig | grep -q 'inet addr:10.65.25.'; then # unosoft
            direct=1
        fi
esac

SIZE=${SIZE:-$(getscreensize)}
echo SIZE=$SIZE

if [ $direct -gt 0 ]; then
	if lsusb | grep -q Gemplus; then
		OPTS="$OPTS /a:smartcard,Gemplus"
	fi
	#exec /usr/local/src/tgulacsi/FreeRDP/MK/client/X11/xfreerdp \
	exec ${RDP:-xfreerdp} \
		/u:UNOSOFT\\TGulacsi /size:$SIZE /a:drive,tmp,/tmp \
                /clipboard /fonts -themes -wallpaper /gdi:hw \
  		/sec:tls $OPTS /v:${1:-unots}
##/usr/bin/rdesktop -P -k en -e \
#${RDP:-xfreerdp} -k 0x409 --plugin cliprdr -x m -a 16 -z \
#  -g $SIZE --gdi hw -d unosoft -u tgulacsi \
#  --sec tls \
#  ${1:-unots}
#  # scard --plugin cliprdr \
#  #--plugin rdpdr disk:tmp:/tmp -- \
else
    exec $(dirname $0)/uno "${1:-unots}"; break
fi
